---
title: "グラフで比較"
---

# **単位**

##### **燃費：km**

##### **タンク容量：L**

##### **航続距離：km**

##### **排気量：cc**

# メーカー別平均燃費

```{r}
# 必要なパッケージ
library(readxl)
library(dplyr)

# ファイルパス
file_path <- "バイク年式;燃費 .xlsx"

# シート名を取得
sheet_names <- excel_sheets(file_path)




# シートごとのデータを読み込んで1つにまとめる
all_sheets <- lapply(sheet_names, function(sheet) {
  df <- read_excel(file_path, sheet = sheet)
  df$メーカー <- sheet  # メーカー列を追加
  df
})

# すべてのバイクデータを結合
all_bikes <- bind_rows(all_sheets)


# 例：列名の統一や文字列→数値の変換（必要に応じて調整）
all_bikes <- all_bikes %>%
  rename(
    車種 = 1,
    年式 = 2,
    燃費 = 3,
    タンク容量 = 4,
    航続距離 = 5,
    排気量 = 6
  ) %>%
  mutate(
    年式 = as.numeric(年式),
    燃費 = as.numeric(燃費),
    タンク容量 = as.numeric(タンク容量),
    航続距離 = as.numeric(航続距離),
    排気量 = as.numeric(排気量)
  )

library(ggplot2)

all_bikes %>%
  group_by(メーカー) %>%
  summarise(平均燃費 = mean(燃費, na.rm = TRUE)) %>%
  ggplot(aes(x = reorder(メーカー, 平均燃費), y = 平均燃費, fill = メーカー)) +
  geom_bar(stat = "identity") +
  coord_flip() +
  labs(title = "メーカー別 平均燃費", x = "メーカー", y = "平均燃費（km/L）") +
  theme_minimal()
```

「燃費重視」ならホンダかヤマハが選択肢に最も適している。

走行性能やスタイル重視であれば燃費を多少犠牲にして、中堅メーカー（アプリリア・カワサキ・KTM）や欧州メーカー（BMW・トライアンフ）を検討。

目的や用途に応じて、平均燃費だけではなく、車種・排気量・走行条件も考慮するのがベスト

# 排気量と航続距離の関係

```{r}
ggplot(all_bikes, aes(x = 排気量, y = 航続距離, color = メーカー)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  labs(title = "排気量と航続距離の関係", x = "排気量 (cc)", y = "航続距離 (km)") +
  theme_minimal()
```

1.  排気量が大きくなるほど航続距離は減少する傾向

2.一部の大型モデル（特にBMW＝赤やホンダ＝紫など）は、タンク容量の大きさによってしっかりした距離を確保している。例えばBMWのアドベンチャーモデル（R1250GS）はタンクが30Lあり、600km以上の長い航続距離を持つ

## メーカーごとの特徴

・アプリリア・カワサキ：高排気量モデルが多く、平均的に航続距離は短め。

・BMW・ホンダ：大型のバイクでも長距離走行に適した設計、特にアドベンチャー系は航続距離が他社を上回る。

・日本メーカー全般（スズキ・ホンダなど）は、排気量控えめなモデルから大型までバランスよく航続距離を確保。

・一般的には『小排気量ほど燃費が良く、航続距離も相対的に長い』が、逆に『大排気量でも大容量タンクを積めば航続距離は伸びる』という傾向が見られる

| 排気量                     | 航続距離傾向                              |
|----------------------------|-------------------------------------------|
| 小排気量                   | 電費が良く、タンク容量次第では長距離も可  |
| 大排気量                   | エンジン性能は高いが燃費は悪化しがち      |
| 大排気量＋大タンクなモデル | 長距離性能に強い（例：BMWアドベンチャー） |

```{r}
library(readxl)
library(dplyr)

# ファイルパス
file_path <- "バイク年式;燃費 .xlsx"
sheet_names <- excel_sheets(file_path)

# データ読み込みとメーカー列追加
all_sheets <- lapply(sheet_names, function(sheet) {
  df <- read_excel(file_path, sheet = sheet)
  df$メーカー <- sheet
  df
})
all_bikes <- bind_rows(all_sheets)

# 必要な列名の標準化（調整が必要な場合あり）
all_bikes <- all_bikes %>%
  rename(
    車種 = 1,
    年式 = 2,
    燃費 = 3,
    タンク容量 = 4,
    航続距離 = 5,
    排気量 = 6
  ) %>%
  mutate(
    年式 = as.numeric(年式),
    燃費 = as.numeric(燃費),
    排気量 = as.numeric(排気量)
  )

# 排気量帯を分類
all_bikes <- all_bikes %>%
  mutate(排気量帯 = case_when(
    排気量 <= 125 ~ "原付・小型",
    排気量 <= 250 ~ "中型",
    排気量 <= 750 ~ "大型",
    TRUE ~ "特大型"
  ))

# 排気量帯別平均燃費を可視化
library(ggplot2)

ggplot(all_bikes, aes(x = 排気量帯, y = 燃費)) +
  geom_boxplot(fill = "lightblue") +
  labs(title = "排気量帯別 燃費比較", x = "排気量帯", y = "燃費（km/L）") +
  theme_minimal()
```

| 排気量帯   | 中央燃費   | ばらつき   | 特徴                                             |
|--------------|--------------|--------------|-------------------------------|
| 原付・小型 | 非常に高い | 大きい     | 軽量・低出力ゆえ燃費性能が高く、車種間差も大きい |
| 中型       | 高～中程度 | 中程度     | バランス志向のモデルが多い                       |
| 大型       | 中程度     | やや少ない | 高出力重視で燃費は控えめ                         |
| 特大型     | 低い       | 少ない     | 大排気量・高出力で燃費は最も低い                 |

### 選ぶときの参考に

コスパ・燃費重視なら小型帯（～250cc）：高燃費かつ軽量で使いやすい。

長距離・パワー重視なら大型～特大型帯：燃費は犠牲になるもののパフォーマンスと航続距離重視が可能。

中型帯はバランス型：適度な燃費と性能の両方を兼ねた選択肢

```{r}
# 仮に2スト・4スト情報を追加（例：条件や外部データで）
all_bikes <- all_bikes %>%
  mutate(ストローク = case_when(
    grepl("NSR|TZR|RZ", 車種, ignore.case = TRUE) ~ "2スト",
    TRUE ~ "4スト"
  ))

# ストローク別平均燃費比較
ggplot(all_bikes, aes(x = ストローク, y = 燃費, fill = ストローク)) +
  geom_boxplot() +
  labs(title = "2スト / 4スト 燃費比較", x = "エンジンタイプ", y = "燃費（km/L）") +
  theme_minimal()
```

## 2スト（赤色の箱）

中央値：約35km/L

四分位範囲（箱の上下）：約32〜42km/L

外れ値：60km/L以上のいくつかの点

全体の分布：比較的狭い範囲に収まっており、燃費のばらつきが少ない

## 🟦 4スト（青緑色の箱）

中央値：約28km/L

四分位範囲：約20〜50km/L

外れ値：70km/L以上に多数存在（最大約120km/L）

全体の分布：ばらつきが大きく、燃費の良い車両も存在

## 💡 結論

2ストロークエンジンの燃費は安定しており平均も高め。

4ストロークエンジンは燃費にばらつきが大きい。一部に非常に高燃費な車両があるが、中央値は低め。

## ✅ 考察ポイント

2ストは構造がシンプルで軽いため燃費が良くなりやすいが、環境性能の面で劣ることがある。

4ストは燃費に差が出やすく、設計や用途によって大きく異なる可能性がある（例：スクーター vs 高性能バイク）。

```{r}
# 年式ごとの平均燃費を折れ線で表示
all_bikes %>%
  group_by(年式) %>%
  summarise(平均燃費 = mean(燃費, na.rm = TRUE)) %>%
  ggplot(aes(x = 年式, y = 平均燃費)) +
  geom_line(color = "darkgreen") +
  geom_point() +
  labs(title = "年式別 平均燃費の推移", x = "年式", y = "平均燃費（km/L）") +
  theme_minimal()
```

## 📈 グラフの概要

X軸（横軸）：年式（車両の製造年）

Y軸（縦軸）：平均燃費（km/L）

## 🔍 主な観察ポイント

1.  全体傾向 年式が新しくなるにつれて平均燃費が一貫して向上しているわけではない。

むしろ、波がありつつ2000年代後半にピークがある。

2.  特筆すべき年 1977年・2009年ごろに異常に高い平均燃費のピーク

特に2009年は平均燃費90km/L以上と突出しており、何らかの特殊な車種（例：ハイブリッド、超軽量車）が混じっている可能性。

3.  1980〜1995年 平均燃費は30〜40km/Lの間を変動。

乱高下はあるが、大きな傾向は見られにくい。

4.  1995〜2010年 燃費がやや改善傾向。1999年、2006年、2009年などにピーク。

技術進歩（インジェクション、エコ仕様）や法規制の影響も考えられる。

5.  2010年以降 燃費はやや減少傾向。

新しい年式でも平均燃費が30km/L前後に低下している。

→ 重量増加、安全装備の追加、大排気量モデルの増加などの影響か？

## 💡 考察ポイント

平均燃費の推移が一直線に向上していないのは、時代ごとの需要・技術・規制・ラインナップ構成の影響。

一部の年に極端な高燃費データが含まれていることから、サンプルにごく少数の特殊車両（例：カブ系、EVバイク）が含まれている可能性も考えられる。
